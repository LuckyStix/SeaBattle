примерный код, который нужно доработать, кратенько.